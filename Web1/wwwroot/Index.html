<html>
    <head>
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <title>Service Fabric with WebSockets Demo</title>
        <script src="Scripts/jquery-1.6.4.min.js"></script>
        <script src="Scripts/js.cookie.js"></script>
        <script src="Scripts/Constants.js"></script>
        <!-- Bootstrap -->
        <link href="Content/bootstrap.css" rel="stylesheet">
        
        <style type="text/css">
            .auto-style1 {
                text-align: center;
                font-size: large;
            }
            .auto-style2 {
                font-size: 16pt;
            }
            .auto-style3 {
                font-size: large;
            }

           .my_submit_button {
              padding-top: 20px;
           }
        </style>
        
    </head>
<body>
   <p>
      <br />
   </p>
   <div class="auto-style1">
      This demo will show the position of every logged user on a map.<br />
      Users can see each other on the map as they move, in real time.<br />
      Future versions will also show more user information<br />
      and allow some user interaction (images, links, chat, etc.)
   </div>
   <p>
      &nbsp;
   </p>
   <!--
      <div>
         User name: <input type="text" id="curUser" value="User1" class="auto-style3">
      </div>
      <div>
         Starting location: <input type="text" id="curLocation" value="Lugano" class="auto-style3">
      </div>
      -->

   <form role="form" class="col-md-2 col-md-offset-5">
      <div class="form-group">
         <label for="curUser">User name:</label>
         <input type="text" class="form-control" id="curUser">
      </div>
      <div class="form-group">
         <label for="curLocation">Starting location:</label>
         <input type="text" class="form-control" id="curLocation">
      </div>
      <div class="my_submit_button text-center">
         <a class="btn btn-default btn-primary" id="loginbutton">Submit</a>
      </div>
   </form>

      <br class="auto-style2" />
      <br />
      <br />


      <!--<ul id="servermsglist">test </ul> -->

   <!--
   <p align="center">
      <button id="loginbutton">Login</button>
   </p>
   -->

   <p id="demo"></p>

   <script>
      $(function () {
         $('#loginbutton').click(function () {
            var username = document.getElementById("curUser").value;
            var start_location = document.getElementById("curLocation").value;
            var urladd = "http://" + window.location.host + API_OFFSET + username;
            jQuery.get(urladd, function (data) {
               var get_result = "from webapi: " + data + "\n";
            });
            var users_params = username.split(" ");
            if ((users_params.length > 1) && (users_params[0] == "kill"))
               sessionStorage.setItem("username", "");
            else
               sessionStorage.setItem("username", username);
            sessionStorage.setItem("location", start_location);
            window.location.href = "http://" + window.location.host + "/UsersMap.html";
         })
      })


   </script>
</body>
</html>
